from uuid import UUID
from bleak import BleakServer, BleakCharacteristic

# Define the UUIDs for your custom service and characteristic
SERVICE_UUID = UUID("0000180F-0000-1000-8000-00805F9B34FB")
CHARACTERISTIC_UUID = UUID("00002A19-0000-1000-8000-00805F9B34FC")

# Define the function that will be called when the characteristic is read
async def read_battery_level(sender, data):
    # Get the current battery level of your PC and return it as bytes
    battery_level = ...
    return bytes([battery_level])

# Create the BleakServer object and add your custom characteristic to it
server = BleakServer()
characteristic = BleakCharacteristic(CHARACTERISTIC_UUID, BleakCharacteristic.READ | BleakCharacteristic.NOTIFY, None, read_battery_level)
server.add_characteristic(characteristic)

# Start advertising your service
async def start():
    await server.start()
    await server.start_advertising(SERVICE_UUID, service_data=None, connectable=True)

# Call the start() function to start advertising your service
asyncio.run(start())
